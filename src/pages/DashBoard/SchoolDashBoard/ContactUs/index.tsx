import React, { useState } from "react";
import {
  IoCopyOutline,
  IoChevronDownOutline,
  IoChevronUpOutline,
} from "react-icons/io5";

/* ----------------------------- tiny UI helpers ---------------------------- */

const CopyPill: React.FC<{ label: string; value: string }> = ({
  label,
  value,
}) => {
  const [copied, setCopied] = useState(false);

  const handleCopy = async () => {
    try {
      await navigator.clipboard.writeText(value);
      setCopied(true);
      setTimeout(() => setCopied(false), 1100);
    } catch {}
  };

  return (
    <div>
      <p className="mb-2 font-[Inter] font-medium text-[14px] leading-[145%] text-[#101928]">{label}</p>
      <div className="relative flex items-center justify-between rounded-[30px] bg-[#EEF2F6] px-[16px] py-[11px] w-[546px] h-[44px] border border-[#E4E7EC]">
        <input
          type="text"
          placeholder={value}
          className="block truncate text-[13px] text-[#98A2B3] bg-transparent border-none outline-none w-full"
          style={{
            width: '546px',
            height: '44px',
            borderWidth: '1px',
            justifyContent: 'space-between',
            transform: 'rotate(0deg)',
            opacity: 1,
            borderRadius: '30px',
            paddingRight: '16px',
            paddingLeft: '16px',
          }}
        />
        <button
          onClick={handleCopy}
          className="inline-flex h-7 w-7 items-center justify-center rounded-full border border-[#E4E7EC] bg-white text-[#98A2B3] hover:bg-gray-50"
          aria-label={`Copy ${label}`}
          title="Copy"
        >
          <IoCopyOutline className="text-[16px]" />
        </button>

        {/* small toast */}
        <span
          className={`pointer-events-none absolute -top-6 right-2 rounded-md bg-black/75 px-2 py-1 text-[10px] text-white transition-opacity ${
            copied ? "opacity-100" : "opacity-0"
          }`}
        >
          Copied
        </span>
      </div>
    </div>
  );
};

type Faq = { q: string; a?: string };
const FaqItem: React.FC<{
  item: Faq;
  open: boolean;
  onToggle: () => void;
}> = ({ item, open, onToggle }) => {
  return (
    <div
      className={`rounded-[30px] border ${
        open ? "border-[#E3EDBE]" : "border-[#E4E7EC]"
      } bg-white transition-all duration-300`}
      style={{
        width: '561px',
        borderWidth: '1px',
        transform: 'rotate(0deg)',
        opacity: 1,
        borderRadius: '30px',
        overflow: 'hidden',
      }}
    >
      <button
        onClick={onToggle}
        className="flex w-full items-center justify-between text-left p-4"
      >
        <p className="font-Inter font-bold text-[18px] leading-[120%] text-[#101928]">{item.q}</p>
        <span className="flex h-6 w-6 items-center justify-center rounded-full border border-[#E4E7EC] bg-[#F7FBE8] text-[#84C127]">
          {open ? (
            <IoChevronUpOutline className="text-[14px]" />
          ) : (
            <IoChevronDownOutline className="text-[14px]" />
          )}
        </span>
      </button>

      <div
        className={`transition-max-height duration-300 ease-in-out ${
          open ? "max-h-40" : "max-h-0"
        }`}
      >
        {open && item.a && (
          <div className="px-4 pb-4">
            <p className="rounded-[10px] bg-white font-Arimo font-[400] text-[18px] leading-[140%] text-[#667185]">
              {item.a}
            </p>
          </div>
        )}
      </div>
    </div>
  );
};

/* --------------------------------- page ---------------------------------- */

const ContactUs: React.FC = () => {
  const [openIdx, setOpenIdx] = useState(-1);

  const faqs: Faq[] = [
    {
      q: "What is Kunda Kids?",
      a: "Kunda Kids is an award-winning educational platform that helps children learn and grow through African-inspired stories, songs, and literacy content. Our content promotes creativity, culture, and early childhood development for kids aged 2â€“12.",
    },
    { q: "How can I sign up?" },
    { q: "What age group is Kunda Kids for?" },
    { q: "How can I track my child's progress?" },
    { q: "Is there a mobile app available?" },
    { q: "Can I access Kunda Kids offline?" },
  ];

  return (
    <div className="min-h-screen bg-[#F6F7FB]">
      {/* page header */}
      <div className="px-4 pt-6 sm:px-6">
        <h1 className="font-Inter font-bold text-[28px] leading-[120%] text-[#101928]">
          Help & Support
        </h1>
        <p className="mt-1 font-Inter font-normal text-[12px] leading-[140%] text-[#667185]">
          Take a look at your policies and the new policy to see what is covered
        </p>
      </div>

      {/* main card */}
      <div className="mx-4 mt-4 rounded-2xl border border-[#E4E7EC] bg-white p-4 mt-[40px] shadow-sm sm:mx-6 sm:p-8">
        <div className="space-y-[60px]">
          {/* ============================ SECTION 1: Contact Details ============================ */}
          <section className="grid grid-cols-1 gap-[128px] lg:grid-cols-[280px,1fr]">
            {/* left label */}
            <div>
              <h3 className="font-Inter font-semibold text-[16px] leading-[145%] text-[#101928]">
                Contact Details
              </h3>
              <p className="mt-1 font-Inter font-normal mt-3 text-[14px] leading-[145%] text-[#667185]">
                Kindly reach out to Kunda Kids via any of these channels.
              </p>
            </div>

            {/* right fields */}
            <div className="space-y-4">
              <CopyPill label="Email" value="info@kundakids.com" />
              <CopyPill label="Phone" value="+234 8123 456 789" />
              <CopyPill label="WhatsApp" value="+234 8123 456 789" />
            </div>
          </section>

          {/* ============================ SECTION 2: Report Problem ============================ */}
          <section className="grid grid-cols-1 items-center gap-[128px] mt-[60px] relative lg:grid-cols-[280px,1fr]">
            {/* left label */}
            <div className="mb-4 lg:mb-0">
              <h3 className="font-Inter font-semibold text-[16px] leading-[145%] text-[#101928]">
                Report Problem
              </h3>
              <p className="mt-1 font-Inter font-normal mt-3 text-[14px] leading-[145%] text-[#667185]">
                Send in a complaint to report an issue.
              </p>
            </div>

            {/* right button (green outline pill) */}
            <div>
              <button
                type="button"
                className="hover:scale-[1.1] transition-all duration-500"
              >
                {/* REPORT PROBLEM BUTTON */}
                <svg
                  width="130"
                  height="37"
                  viewBox="0 0 130 37"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect
                    x="0.75"
                    y="1.25"
                    width="128.5"
                    height="34.5"
                    rx="17.25"
                    stroke="#BCD678"
                    strokeWidth="1.5"
                  />
                  <path
                    d="M13.2992 23.5V13.3182H17.1174C17.8996 13.3182 18.5558 13.4541 19.0861 13.7259C19.6197 13.9976 20.0224 14.3788 20.2942 14.8693C20.5693 15.3565 20.7069 15.925 20.7069 16.5746C20.7069 17.2275 20.5676 17.7943 20.2892 18.2749C20.0141 18.7521 19.6081 19.1217 19.0712 19.3835C18.5343 19.642 17.8747 19.7713 17.0925 19.7713H14.373V18.2401H16.8439C17.3013 18.2401 17.6758 18.1771 17.9675 18.0511C18.2592 17.9219 18.4746 17.7346 18.6138 17.4893C18.7563 17.2408 18.8276 16.9358 18.8276 16.5746C18.8276 16.2133 18.7563 15.9051 18.6138 15.6499C18.4713 15.3913 18.2542 15.1958 17.9625 15.0632C17.6709 14.9273 17.2947 14.8594 16.834 14.8594H15.1436V23.5H13.2992ZM18.5591 18.8864L21.0797 23.5H19.0215L16.5456 18.8864H18.5591ZM25.5964 23.6491C24.8308 23.6491 24.1696 23.4901 23.6127 23.1719C23.0592 22.8504 22.6333 22.3963 22.335 21.8097C22.0368 21.2197 21.8876 20.5253 21.8876 19.7266C21.8876 18.9411 22.0368 18.2517 22.335 17.6584C22.6367 17.0618 23.0576 16.5978 23.5978 16.2663C24.1381 15.9316 24.7728 15.7642 25.502 15.7642C25.9726 15.7642 26.4167 15.8404 26.8343 15.9929C27.2553 16.142 27.6265 16.3741 27.948 16.6889C28.2728 17.0038 28.528 17.4048 28.7136 17.892C28.8992 18.3759 28.992 18.9527 28.992 19.6222V20.174H22.7328V18.9609H27.2669C27.2636 18.6162 27.189 18.3097 27.0431 18.0412C26.8973 17.7694 26.6935 17.5556 26.4316 17.3999C26.1731 17.2441 25.8715 17.1662 25.5268 17.1662C25.1589 17.1662 24.8358 17.2557 24.5574 17.4347C24.2789 17.6103 24.0618 17.8423 23.9061 18.1307C23.7536 18.4157 23.6757 18.7289 23.6724 19.0703V20.1293C23.6724 20.5734 23.7536 20.9545 23.916 21.2727C24.0784 21.5876 24.3055 21.8295 24.5971 21.9986C24.8888 22.1643 25.2302 22.2472 25.6213 22.2472C25.8831 22.2472 26.1201 22.2107 26.3322 22.1378C26.5443 22.0616 26.7283 21.9505 26.8841 21.8047C27.0398 21.6589 27.1575 21.4782 27.237 21.2628L28.9174 21.4517C28.8114 21.8958 28.6092 22.2836 28.3109 22.6151C28.0159 22.9432 27.6381 23.1984 27.1774 23.3807C26.7167 23.5597 26.1897 23.6491 25.5964 23.6491ZM30.5146 26.3636V15.8636H32.2844V17.1264H32.3888C32.4817 16.9408 32.6126 16.7436 32.7816 16.5348C32.9506 16.3227 33.1793 16.142 33.4677 15.9929C33.756 15.8404 34.1239 15.7642 34.5714 15.7642C35.1613 15.7642 35.6933 15.915 36.1673 16.2166C36.6445 16.5149 37.0224 16.9574 37.3008 17.544C37.5825 18.1274 37.7234 18.8433 37.7234 19.6918C37.7234 20.5303 37.5858 21.2429 37.3107 21.8295C37.0356 22.4162 36.6611 22.8636 36.1871 23.1719C35.7132 23.4801 35.1763 23.6342 34.5763 23.6342C34.1388 23.6342 33.7759 23.5613 33.4876 23.4155C33.1992 23.2696 32.9672 23.094 32.7915 22.8885C32.6192 22.6797 32.485 22.4825 32.3888 22.2969H32.3143V26.3636H30.5146ZM32.2795 19.6818C32.2795 20.1757 32.3491 20.6082 32.4883 20.9794C32.6308 21.3506 32.8346 21.6406 33.0998 21.8494C33.3683 22.0549 33.6931 22.1577 34.0742 22.1577C34.4719 22.1577 34.805 22.0516 35.0735 21.8395C35.342 21.6241 35.5442 21.3307 35.68 20.9595C35.8192 20.585 35.8888 20.1591 35.8888 19.6818C35.8888 19.2079 35.8209 18.7869 35.685 18.419C35.5491 18.0511 35.3469 17.7628 35.0785 17.554C34.81 17.3452 34.4753 17.2408 34.0742 17.2408C33.6897 17.2408 33.3633 17.3419 33.0948 17.544C32.8263 17.7462 32.6225 18.0296 32.4833 18.3942C32.3474 18.7588 32.2795 19.188 32.2795 19.6818ZM42.5955 23.6491C41.8498 23.6491 41.2035 23.4851 40.6566 23.157C40.1097 22.8288 39.6855 22.3698 39.3839 21.7798C39.0856 21.1899 38.9364 20.5005 38.9364 19.7116C38.9364 18.9228 39.0856 18.2318 39.3839 17.6385C39.6855 17.0452 40.1097 16.5845 40.6566 16.2564C41.2035 15.9283 41.8498 15.7642 42.5955 15.7642C43.3413 15.7642 43.9876 15.9283 44.5344 16.2564C45.0813 16.5845 45.5039 17.0452 45.8022 17.6385C46.1038 18.2318 46.2546 18.9228 46.2546 19.7116C46.2546 20.5005 46.1038 21.1899 45.8022 21.7798C45.5039 22.3698 45.0813 22.8288 44.5344 23.157C43.9876 23.4851 43.3413 23.6491 42.5955 23.6491ZM42.6055 22.2074C43.0098 22.2074 43.3479 22.0964 43.6197 21.8743C43.8915 21.6489 44.0936 21.3473 44.2262 20.9695C44.3621 20.5916 44.43 20.1707 44.43 19.7067C44.43 19.2393 44.3621 18.8168 44.2262 18.4389C44.0936 18.0578 43.8915 17.7545 43.6197 17.5291C43.3479 17.3037 43.0098 17.1911 42.6055 17.1911C42.1912 17.1911 41.8465 17.3037 41.5714 17.5291C41.2996 17.7545 41.0958 18.0578 40.9599 18.4389C40.8273 18.8168 40.761 19.2393 40.761 19.7067C40.761 20.1707 40.8273 20.5916 40.9599 20.9695C41.0958 21.3473 41.2996 21.6489 41.5714 21.8743C41.8465 22.0964 42.1912 22.2074 42.6055 22.2074ZM47.7821 23.5V15.8636H49.5272V17.1364H49.6067C49.7459 16.6955 49.9846 16.3558 50.3226 16.1172C50.664 15.8752 51.0534 15.7543 51.4909 15.7543C51.5904 15.7543 51.7014 15.7592 51.824 15.7692C51.95 15.7758 52.0544 15.7874 52.1373 15.804V17.4595C52.061 17.433 51.94 17.4098 51.7743 17.3899C51.6119 17.3667 51.4545 17.3551 51.302 17.3551C50.9739 17.3551 50.6789 17.4264 50.4171 17.5689C50.1586 17.7081 49.9547 17.902 49.8056 18.1506C49.6564 18.3991 49.5819 18.6858 49.5819 19.0107V23.5H47.7821ZM57.5563 15.8636V17.2557H53.1664V15.8636H57.5563ZM54.2502 14.0341H56.0499V21.2031C56.0499 21.4451 56.0864 21.6307 56.1593 21.7599C56.2355 21.8859 56.3349 21.9721 56.4576 22.0185C56.5802 22.0649 56.7161 22.0881 56.8652 22.0881C56.9779 22.0881 57.0807 22.0798 57.1735 22.0632C57.2696 22.0466 57.3425 22.0317 57.3922 22.0185L57.6955 23.4254C57.5994 23.4586 57.4618 23.495 57.2828 23.5348C57.1072 23.5746 56.8917 23.5978 56.6365 23.6044C56.1858 23.6177 55.7798 23.5497 55.4185 23.4006C55.0572 23.2481 54.7705 23.0128 54.5584 22.6946C54.3496 22.3764 54.2469 21.9787 54.2502 21.5014V14.0341ZM62.6136 23.5V13.3182H66.4318C67.214 13.3182 67.8703 13.464 68.4006 13.7557C68.9342 14.0473 69.3369 14.4484 69.6087 14.9588C69.8838 15.4659 70.0213 16.0426 70.0213 16.6889C70.0213 17.3419 69.8838 17.9219 69.6087 18.429C69.3336 18.9361 68.9276 19.3355 68.3906 19.6271C67.8537 19.9155 67.1925 20.0597 66.407 20.0597H63.8764V18.5433H66.1584C66.6158 18.5433 66.9903 18.4638 67.282 18.3047C67.5736 18.1456 67.7891 17.9268 67.9283 17.6484C68.0708 17.37 68.142 17.0502 68.142 16.6889C68.142 16.3277 68.0708 16.0095 67.9283 15.7344C67.7891 15.4593 67.572 15.2455 67.277 15.093C66.9853 14.9373 66.6091 14.8594 66.1484 14.8594H64.4581V23.5H62.6136ZM71.5439 23.5V15.8636H73.2889V17.1364H73.3684C73.5076 16.6955 73.7463 16.3558 74.0843 16.1172C74.4257 15.8752 74.8152 15.7543 75.2527 15.7543C75.3521 15.7543 75.4631 15.7592 75.5858 15.7692C75.7117 15.7758 75.8161 15.7874 75.899 15.804V17.4595C75.8227 17.433 75.7018 17.4098 75.536 17.3899C75.3736 17.3667 75.2162 17.3551 75.0637 17.3551C74.7356 17.3551 74.4406 17.4264 74.1788 17.5689C73.9203 17.7081 73.7164 17.902 73.5673 18.1506C73.4181 18.3991 73.3436 18.6858 73.3436 19.0107V23.5H71.5439ZM80.1112 23.6491C79.3654 23.6491 78.7191 23.4851 78.1722 23.157C77.6254 22.8288 77.2011 22.3698 76.8995 21.7798C76.6012 21.1899 76.4521 20.5005 76.4521 19.7116C76.4521 18.9228 76.6012 18.2318 76.8995 17.6385C77.2011 17.0452 77.6254 16.5845 78.1722 16.2564C78.7191 15.9283 79.3654 15.7642 80.1112 15.7642C80.8569 15.7642 81.5032 15.9283 82.0501 16.2564C82.5969 16.5845 83.0195 17.0452 83.3178 17.6385C83.6194 18.2318 83.7702 18.9228 83.7702 19.7116C83.7702 20.5005 83.6194 21.1899 83.3178 21.7798C83.0195 22.3698 82.5969 22.8288 82.0501 23.157C81.5032 23.4851 80.8569 23.6491 80.1112 23.6491ZM80.1211 22.2074C80.5254 22.2074 80.8635 22.0964 81.1353 21.8743C81.4071 21.6489 81.6093 21.3473 81.7418 20.9695C81.8777 20.5916 81.9457 20.1707 81.9457 19.7067C81.9457 19.2393 81.8777 18.8168 81.7418 18.4389C81.6093 18.0578 81.4071 17.7545 81.1353 17.5291C80.8635 17.3037 80.5254 17.1911 80.1211 17.1911C79.7068 17.1911 79.3621 17.3037 79.087 17.5291C78.8152 17.7545 78.6114 18.0578 78.4755 18.4389C78.3429 18.8168 78.2766 19.2393 78.2766 19.7067C78.2766 20.1707 78.3429 20.5916 78.4755 20.9695C78.6114 21.3473 78.8152 21.6489 79.087 21.8743C79.3621 22.0964 79.7068 22.2074 80.1211 22.2074ZM85.3773 23.5V13.3182H87.177V17.1264H87.2516C87.3444 16.9408 87.4753 16.7436 87.6444 16.5348C87.8134 16.3227 88.0421 16.142 88.3304 15.9929C88.6188 15.8404 88.9867 15.7642 89.4341 15.7642C90.0241 15.7642 90.556 15.915 91.03 16.2166C91.5073 16.5149 91.8851 16.9574 92.1635 17.544C92.4453 18.1274 92.5861 18.8433 92.5861 19.6918C92.5861 20.5303 92.4486 21.2429 92.1735 21.8295C91.8984 22.4162 91.5239 22.8636 91.0499 23.1719C90.5759 23.4801 90.039 23.6342 89.4391 23.6342C89.0016 23.6342 88.6387 23.5613 88.3503 23.4155C88.062 23.2696 87.83 23.094 87.6543 22.8885C87.4819 22.6797 87.3477 22.4825 87.2516 22.2969H87.1472V23.5H85.3773ZM87.1422 19.6818C87.1422 20.1757 87.2118 20.6082 87.351 20.9794C87.4935 21.3506 87.6974 21.6406 87.9625 21.8494C88.231 22.0549 88.5558 22.1577 88.937 22.1577C89.3347 22.1577 89.6678 22.0516 89.9363 21.8395C90.2047 21.6241 90.4069 21.3307 90.5428 20.9595C90.682 20.585 90.7516 20.1591 90.7516 19.6818C90.7516 19.2079 90.6837 18.7869 90.5478 18.419C90.4119 18.0511 90.2097 17.7628 89.9412 17.554C89.6728 17.3452 89.338 17.2408 88.937 17.2408C88.5525 17.2408 88.226 17.3419 87.9576 17.544C87.6891 17.7462 87.4853 18.0296 87.3461 18.3942C87.2102 18.7588 87.1422 19.188 87.1422 19.6818ZM95.9158 13.3182V23.5H94.1161V13.3182H95.9158ZM101.147 23.6491C100.382 23.6491 99.7203 23.4901 99.1635 23.1719C98.61 22.8504 98.1841 22.3963 97.8858 21.8097C97.5875 21.2197 97.4384 20.5253 97.4384 19.7266C97.4384 18.9411 97.5875 18.2517 97.8858 17.6584C98.1874 17.0618 98.6084 16.5978 99.1486 16.2663C99.6889 15.9316 100.324 15.7642 101.053 15.7642C101.523 15.7642 101.968 15.8404 102.385 15.9929C102.806 16.142 103.177 16.3741 103.499 16.6889C103.824 17.0038 104.079 17.4048 104.264 17.892C104.45 18.3759 104.543 18.9527 104.543 19.6222V20.174H98.2836V18.9609H102.818C102.814 18.6162 102.74 18.3097 102.594 18.0412C102.448 17.7694 102.244 17.5556 101.982 17.3999C101.724 17.2441 101.422 17.1662 101.078 17.1662C100.71 17.1662 100.387 17.2557 100.108 17.4347C99.8297 17.6103 99.6126 17.8423 99.4569 18.1307C99.3044 18.4157 99.2265 18.7289 99.2232 19.0703V20.1293C99.2232 20.5734 99.3044 20.9545 99.4668 21.2727C99.6292 21.5876 99.8562 21.8295 100.148 21.9986C100.44 22.1643 100.781 22.2472 101.172 22.2472C101.434 22.2472 101.671 22.2107 101.883 22.1378C102.095 22.0616 102.279 21.9505 102.435 21.8047C102.591 21.6589 102.708 21.4782 102.788 21.2628L104.468 21.4517C104.362 21.8958 104.16 22.2836 103.862 22.6151C103.567 22.9432 103.189 23.1984 102.728 23.3807C102.267 23.5597 101.74 23.6491 101.147 23.6491ZM106.065 23.5V15.8636H107.786V17.1612H107.875C108.034 16.7237 108.298 16.3823 108.665 16.1371C109.033 15.8885 109.473 15.7642 109.983 15.7642C110.5 15.7642 110.936 15.8902 111.29 16.142C111.648 16.3906 111.9 16.7304 112.046 17.1612H112.126C112.295 16.737 112.58 16.3989 112.981 16.147C113.385 15.8918 113.864 15.7642 114.418 15.7642C115.12 15.7642 115.694 15.9863 116.138 16.4304C116.582 16.8745 116.804 17.5225 116.804 18.3743V23.5H114.999V18.6527C114.999 18.1787 114.873 17.8324 114.621 17.6136C114.37 17.3916 114.061 17.2805 113.697 17.2805C113.263 17.2805 112.923 17.4164 112.678 17.6882C112.436 17.9567 112.315 18.3063 112.315 18.7372V23.5H110.55V18.5781C110.55 18.1837 110.43 17.8688 110.192 17.6335C109.956 17.3982 109.648 17.2805 109.267 17.2805C109.009 17.2805 108.773 17.3468 108.561 17.4794C108.349 17.6087 108.18 17.7926 108.054 18.0312C107.928 18.2666 107.865 18.5417 107.865 18.8565V23.5H106.065Z"
                    fill="#9FC43E"
                  />
                </svg>
              </button>
            </div>
          </section>

          {/* ============================ SECTION 3: FAQs ============================ */}
          <section className="grid grid-cols-1 gap-[128px]  lg:grid-cols-[280px,1fr]">
            {/* left helper text */}
            <div>
              <h3 className="font-Inter font-semibold text-[16px] leading-[145%] text-[#101928]">
                Got Questions? Weâ€™ve Got Answers.
              </h3>
              <p className="mt-1 font-Inter font-normal mt-3 text-[14px] leading-[145%] text-[#667185]">
                Explore common questions about Kunda Kids â€” from signing up to
                tracking progress and everything in between.
              </p>
            </div>

            {/* right accordion list */}
            <div className="space-y-3">
              {faqs.map((f, i) => (
                <FaqItem
                  key={i}
                  item={f}
                  open={openIdx === i}
                  onToggle={() => setOpenIdx(openIdx === i ? -1 : i)}
                />
              ))}
            </div>
          </section>
        </div>
      </div>
    </div>
  );
};

export default ContactUs;
