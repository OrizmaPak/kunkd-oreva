import{a$ as P,as as L,a as k,g as M,aC as B,D as f,E as I,H as G,j as e,aq as z,I as C,a6 as q,B as E,L as Q,x as T,av as R,J as w,M as _,$ as S,a0 as F,ax as K,b0 as U,b1 as V,b2 as $,r as A,at as H,T as J,aE as O}from"./index-7fa67d35.js";import{C as W}from"./ChangeProfileStatus-b93d7f47.js";import{S as X,E as Y}from"./connectionEmpty-35d9a48c.js";import{S as Z}from"./SearchFilter-0cb8ea8a.js";import"./index.esm-9f214563.js";const D="/assets/addUserIcon-25fdbb61.svg",ee=({close:l,openSchNotifications:i})=>{var h,u,v,y,t;const{mutate:r,isLoading:o}=P(),c=L(),[g]=k(M),{data:j}=B(),d=(h=j==null?void 0:j.data)==null?void 0:h.data.records,m=d==null?void 0:d.filter(s=>(s==null?void 0:s.teacher_count)<1),b=f.object({firstname:f.string().min(2,{message:"First name must be at least 2 characters long"}).max(40,{message:"First name must not exceed 20 characters"}),lastname:f.string().min(2,{message:"Last name must be at least 2 characters long"}).max(50,{message:"Last name must not exceed 40 characters"}),classid:f.string().optional(),email:f.string().email()}),{register:n,handleSubmit:N,formState:{errors:a}}=I({resolver:G(b)}),x=async s=>{r({firstname:s==null?void 0:s.firstname,lastname:s==null?void 0:s.lastname,email:s==null?void 0:s.email,redirect_url:`${window.location.origin}/passwordsetup`,gender_id:1,class_id:Number(s==null?void 0:s.classid)},{onSuccess(p){T("teacher_otp_verification_status",{teacher_name:s.firstname+" "+s.lastname,verification_status:"true"}),c.invalidateQueries(["GetTeacherList"]),c.invalidateQueries(["GetLicense"]),T("add_teacher",{school_id:g==null?void 0:g.user_id,teacher_name:s.firstname+" "+s.lastname,date_added:R}),l(),w.show({title:"Notification",message:p.data.message})},onError(p){l(),_(p)==="Please upgrade your license to add more teachers"&&i(),w.show({title:"Notification",message:_(p)})}})};return e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:e.jsxs("div",{className:"pb-5",children:[e.jsx("div",{className:"flex justify-between items-center mb-8 bg-customGreen px-6 py-4 ",children:e.jsx("p",{className:" font-InterReg text20   flex-grow text-white ",children:"Add New Teacher"})}),e.jsxs("form",{onSubmit:N(x),className:"px-[24px]",children:[e.jsx("div",{className:"mb-5",children:e.jsx(C,{reg:n("firstname"),errorMsg:(u=a==null?void 0:a.firstname)==null?void 0:u.message,placeholder:"First name",type:"text"})}),e.jsx("div",{className:"mb-5",children:e.jsx(C,{reg:n("lastname"),errorMsg:(v=a==null?void 0:a.lastname)==null?void 0:v.message,placeholder:"Last name",type:"text"})}),e.jsx("div",{className:"mb-5",children:e.jsx(C,{reg:n("email"),errorMsg:(y=a.email)==null?void 0:y.message,type:"email",placeholder:"Email",leftIcon:e.jsx(q,{size:20,color:"#c4ccd0"})})}),e.jsx("div",{className:"flex gap-2 mb-5",children:e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"bg-[#F1F1F1] py-3 px-8 rounded-full flex items-center gap-2   mb-2 ",children:e.jsxs("select",{...n("classid"),name:"classid",id:"classid",className:"w-full  h-full flex-1  focus:outline-none bg-inherit",children:[e.jsx("option",{value:"",children:"Select Class"}),m==null?void 0:m.map((s,p)=>e.jsx("option",{value:s.id,children:s.name},p))]})}),e.jsx("span",{className:"text-red-600",children:(t=a.classid)==null?void 0:t.message})]})}),e.jsxs("div",{className:" mx-auto my-4 flex gap-3 justify-center ",children:[e.jsx(E,{size:"sm",onClick:l,className:"text-black bg-[#F1F1F1] rounded-full px-[40px]  ",children:"Cancel"}),e.jsx(E,{size:"sm",type:"submit",backgroundColor:"green",className:"text-white rounded-full px-[40px] ",children:o?e.jsx("p",{className:"flex justify-center items-center ",children:e.jsx(Q,{color:"white",size:"sm"})}):e.jsx("span",{children:"Add New Teacher"})})]})]})]})})},se=({openSchNotifications:l})=>{const[i,{close:r,open:o}]=S(!1);return e.jsx(e.Fragment,{children:e.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:[e.jsx(E,{onClick:o,size:"sm",varient:"filled",backgroundColor:"green",children:e.jsxs("span",{className:"flex  h-[25px]  px-3 justify-between items-center gap-2",children:[e.jsx("img",{loading:"lazy",src:D,alt:""}),e.jsx("span",{className:"py-1",children:"Add new teacher"})]})}),e.jsx(F,{radius:20,size:450,opened:i,onClose:r,padding:0,withCloseButton:!1,centered:!0,children:e.jsx(ee,{close:r,openSchNotifications:l})})]})})},ie=({close:l,currentData:i})=>{var a,x,h,u,v,y;console.log("currentTeacherdata",i);const r=L(),{data:o}=B(),c=(a=o==null?void 0:o.data)==null?void 0:a.data.records,g=f.object({firstname:f.string().min(2,{message:"First name must be at least 2 characters long"}).max(40,{message:"First name must not exceed 20 characters"}),lastname:f.string().min(2,{message:"Last name must be at least 2 characters long"}).max(50,{message:"Last name must not exceed 40 characters"}),classid:f.string().optional(),email:f.string().email()}),{mutate:j,isLoading:d}=K(),{register:m,handleSubmit:b,formState:{errors:n}}=I({resolver:G(g)}),N=async t=>{var s;j({user_id:(s=i==null?void 0:i.user)==null?void 0:s.id,class_id:Number(t==null?void 0:t.classid)},{onSuccess(p){r.invalidateQueries({queryKey:["GetClassList"]}),r.invalidateQueries({queryKey:["GetTeacherList"]}),l(),w.show({title:"Notification",message:p.data.message})},onError(p){w.show({title:"Notification",message:_(p)})}})};return e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:e.jsxs("div",{className:"pb-5",children:[e.jsx("div",{className:"flex justify-between items-center mb-8 bg-customGreen px-6 py-4 ",children:e.jsx("p",{className:" font-InterReg text20   flex-grow text-white ",children:"Edit Teacher"})}),e.jsxs("form",{onSubmit:b(N),className:"px-[24px]",children:[e.jsx("div",{className:"mb-5",children:e.jsx(C,{reg:m("firstname"),errorMsg:(x=n==null?void 0:n.firstname)==null?void 0:x.message,placeholder:"First name",type:"text",value:i==null?void 0:i.user.firstname})}),e.jsx("div",{className:"mb-5",children:e.jsx(C,{reg:m("lastname"),errorMsg:(h=n==null?void 0:n.lastname)==null?void 0:h.message,placeholder:"Last name",type:"text",value:i==null?void 0:i.user.lastname})}),e.jsx("div",{className:"mb-5",children:e.jsx(C,{reg:m("email"),errorMsg:(u=n.email)==null?void 0:u.message,type:"email",placeholder:"Email",leftIcon:e.jsx(q,{size:20,color:"#c4ccd0"}),value:i==null?void 0:i.user.email})}),e.jsx("div",{className:"flex gap-2 mb-5",children:e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"bg-[#F1F1F1] py-3 px-8 rounded-full flex items-center gap-2   mb-2 ",children:e.jsxs("select",{...m("classid"),name:"classid",id:"classid",defaultValue:(v=i==null?void 0:i.user)==null?void 0:v.class_id,className:"w-full h-full flex-1 focus:outline-none bg-inherit",children:[e.jsx("option",{value:"",children:"Select Class"}),c==null?void 0:c.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})}),e.jsx("span",{className:"text-red-600",children:(y=n.classid)==null?void 0:y.message})]})}),e.jsxs("div",{className:" mx-auto my-4 flex gap-3 justify-center ",children:[e.jsx(E,{size:"sm",onClick:l,className:"text-black bg-[#F1F1F1] rounded-full px-[40px]  ",children:"Cancel"}),e.jsx(E,{size:"sm",type:"submit",backgroundColor:"green",className:"text-white rounded-full px-[40px] ",children:d?e.jsx("p",{className:"flex justify-center items-center ",children:e.jsx(Q,{color:"white",size:"sm"})}):e.jsx("span",{children:"Edit Teacher"})})]})]})]})})},ae=({data:l,onClick:i,currentClicked:r,status:o})=>{var y;const c=L(),{mutate:g,isLoading:j}=U(),{mutate:d,isLoading:m}=V(),[b]=k(M),n=async()=>{o==="active"?g({user_id:r},{onSuccess(t){T("disable_teacher",{school_id:b==null?void 0:b.user_id,disable_date:R}),c.invalidateQueries({queryKey:["GetTeacherList"]}),w.show({title:"Notification",message:t.data.message}),x()},onError(t){w.show({title:"Notification",message:_(t)})}}):o==="disable"&&d({user_id:r},{onSuccess(t){c.invalidateQueries({queryKey:["GetTeacherList"]}),w.show({title:"Notification",message:t.data.message}),x()},onError(t){w.show({title:"Notification",message:_(t)})}})},[N,{open:a,close:x}]=S(!1),[h,{open:u,close:v}]=S(!1);return e.jsxs(e.Fragment,{children:[e.jsx(F,{radius:20,padding:0,size:"md",opened:N,onClose:x,withCloseButton:!1,centered:!0,children:e.jsx(W,{onCancel:x,onContinue:n,isLoading:j||m,label:"Teacher",status:o})}),e.jsx(F,{radius:20,padding:0,size:"md",opened:h,onClose:v,withCloseButton:!1,centered:!0,children:e.jsx(ie,{currentData:l,close:v})}),e.jsx("div",{className:" hover:cursor-pointer  font-medium",children:e.jsx("div",{children:e.jsxs("div",{className:"grid  grid-cols-[1fr_1fr_200px_200px_200px] text-[#101928]  font-InterReg h-[72px] items-center   px-8 border-b-2 border-[#E5E7EB]",children:[e.jsxs("div",{onClick:i,className:"flex items-center justify-start gap-[20px] ",children:[e.jsx("span",{children:e.jsx($,{size:30,color:"#BCD678"})}),e.jsxs("span",{children:[l.user.firstname," ",l.user.lastname]})]}),e.jsx("div",{className:"flex justify-start items-center ",children:l.user.email}),e.jsx("div",{children:((y=l==null?void 0:l.user)==null?void 0:y.class_name)||"No class has been assigned"}),e.jsx("div",{children:"Apr 12, 2023 | 09:32AM"}),e.jsxs("div",{className:"flex justify-between  gap-4  items-center pr-10",children:[e.jsx("span",{}),e.jsx("button",{onClick:()=>{a()},className:"text-[#7E7E89] font-semibold font-Hanken ",children:e.jsx("span",{children:o==="active"?"Disable":"Enable"})}),e.jsx("button",{disabled:o!=="active",onClick:u,className:" text-customGreen font-Inter",children:"Edit"})]})]})})})]})},oe=()=>{const[l,i]=A.useState("active"),[r,o]=A.useState(1),{data:c,isLoading:g,refetch:j}=H(l,r==null?void 0:r.toString()),d=c==null?void 0:c.data.data.records,m=c==null?void 0:c.data.data.number_pages,[b,{open:n,close:N}]=S(!1);return e.jsxs("div",{className:"h-full flex flex-col overflow-y-scroll",children:[e.jsx(F,{radius:10,size:"md",opened:b,onClose:N,closeButtonProps:{size:"lg"},centered:!0,children:e.jsx(X,{onCancel:N,label:"teachers"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h1",{className:"text-[25px]  font-Inter",children:["Teachers",e.jsx("span",{className:"text-[#667185] bg-[#C2DBB0] rounded-2xl p-2 ml-5",children:(d==null?void 0:d.length)||0})]}),e.jsx("div",{className:"flex gap-3 justify-end",children:e.jsx(se,{openSchNotifications:n})})]}),e.jsxs("div",{className:" flex-grow flex flex-col rounded-3xl py-4 bg-white border-[2px] border-[#E4E7EC]",children:[e.jsx("div",{children:e.jsx(Z,{setFilterValue:i,filterValue:l})}),e.jsx("div",{children:e.jsxs("div",{className:"grid  grid-cols-[1fr_1fr_200px_200px_200px] mt-5  px-8 text-[#101928]  font-semibold py-4 border-b-2 bg-[#F9FAFB] border-[#E4E7EC]",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{className:"",children:"Email"}),e.jsx("div",{children:"Class"}),e.jsx("div",{children:"Last Active"}),e.jsxs("div",{className:"flex justify-end   items-center",children:[e.jsx("span",{})," "]})]})}),e.jsx("div",{className:"flex flex-col flex-grow",children:g?new Array(10).fill(1).map((a,x)=>e.jsx(J,{height:60,my:10,visible:!0,children:e.jsx("h1",{className:"w-full"})},x)):(d==null?void 0:d.length)>0?d.map((a,x)=>{var h,u;return e.jsx(ae,{status:(h=a==null?void 0:a.user)==null?void 0:h.status_name,currentClicked:(u=a==null?void 0:a.user)==null?void 0:u.id,onClick:()=>{open()},data:a},x)}):e.jsxs("div",{className:"flex justify-center items-center h-full mt-24 flex-col",children:[e.jsx("img",{src:Y,alt:"No teachers",className:"w-[150px] h-[150px] object-contain"}),e.jsx("p",{className:"font-Inter text-[18px]",children:"No teachers available"}),e.jsx("p",{className:"font-Baloo text-[14px]",children:"Teachers will appear here once added."})]})})]}),e.jsx("div",{children:e.jsx("div",{className:"flex  justify-end mt-2 px-4",children:m>1&&e.jsx("div",{className:"px-10  mr-2 flex justify-end  pb-8",children:e.jsx(O,{total:m,value:r,defaultChecked:!0,onChange:o,onClick:()=>{j()},styles:()=>({control:{"&[data-active]":{backgroundColor:"#8530C1 !important"}}})})})})}),e.jsx("style",{children:`
       ::-webkit-scrollbar {
  width: 0;
  background: transparent;
}
        `})]})};export{oe as default};
