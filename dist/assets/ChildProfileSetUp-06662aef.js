import{f as L,r as i,c9 as R,ca as J,cb as M,j as t,v as T,K as $,I as G,B as O,J as p,M as v}from"./index-7fa67d35.js";const q=({setChildProfile:d})=>{const y=L(),[f,C]=i.useState(""),[c,g]=i.useState(""),[u,B]=i.useState(""),[I]=R(c,250),{isError:k,isLoading:m,isInitialLoading:h}=J(I),x=!m&&!h&&k,{mutate:b}=M(),[n,N]=i.useState([]),j=i.useRef(null),E="username-suggestions",A=new Date().toISOString().split("T")[0],r=e=>{var s;return typeof e=="string"?e:((s=e==null?void 0:e.target)==null?void 0:s.value)!=null?String(e.target.value):String(e??"")},U=e=>{const l=r(e).trim();if(!l){N([]);return}b({name:l},{onSuccess(a){var o,S;N(((S=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:S.suggestions)||[])},onError(a){p.show({title:"Notification",message:v(a)})}})},_=e=>{var s;g(e),(s=j.current)==null||s.focus()},F=r(f).trim(),w=r(c).trim(),D=!!(F&&w&&u)&&!x&&!m,K=()=>{b({name:F,dob:u,is_avatar:"false",username:w},{onSuccess(e){var l,a,o;const s=(a=(l=e==null?void 0:e.data)==null?void 0:l.data)==null?void 0:a.profile_id;s&&(sessionStorage.setItem("showJoinChallenge","true"),d==null||d(String(s))),p.show({title:"Notification",message:((o=e==null?void 0:e.data)==null?void 0:o.message)||"Profile created successfully!"}),y("/profilesuccess")},onError(e){p.show({title:"Notification",message:v(e)})}})};return t.jsx("div",{className:"min-h-screen w-full bg-no-repeat bg-cover bg-center flex items-center justify-center px-4",style:{backgroundImage:`url(${T})`},children:t.jsx("section",{className:"w-full max-w-6xl flex items-center justify-end",children:t.jsxs("div",{className:"w-full sm:w-[520px] md:w-[560px] bg-white/95 backdrop-blur-[0.5px] rounded-[28px] shadow-[0_22px_60px_rgba(0,0,0,0.10)] p-6 sm:py-10 sm:px-14",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:$,alt:"Kunda Kids",className:"h-9 sm:h-10"})}),t.jsxs("div",{className:"text-center mt-5 mb-6 sm:mb-8",children:[t.jsx("h1",{className:"text-[22px] sm:text-[26px] font-semibold text-[#111827]",children:"Create child’s profile"}),t.jsx("p",{className:"text-sm text-[#6B7280] mt-1",children:"Enter the child’s info to create a profile."})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(G,{label:"",placeholder:"Child’s full name",value:f,onChange:e=>{const s=r(e);C(s),U(s)},className:"!bg-transparent",inputClassName:"h-12 sm:h-[52px] rounded-full bg-[#ECEFF1] focus:bg-[#FFF6D9] px-5 text-[15px] placeholder:text-[#8C9AAE] border border-transparent focus:border-[#9FC43E] outline-none w-full"}),t.jsxs("div",{children:[t.jsx("input",{ref:j,value:c,onChange:e=>g(r(e)),placeholder:"Enter a nickname",className:`h-12 sm:h-[52px] w-full rounded-full px-5 text-[15px] placeholder:text-[#8C9AAE] outline-none transition
                  ${x?"bg-[#FFE4E6] border border-[#EF4444]":"bg-[#ECEFF1] border border-transparent focus:bg-[#FFF6D9] focus:border-[#9FC43E]"}`,list:E}),t.jsx("datalist",{id:E,children:n==null?void 0:n.map(e=>t.jsx("option",{value:e},e))}),t.jsx("p",{className:"text-[11px] text-[#6B7280] mt-1",children:"Note: the username would display on leaderboard."}),!!(n!=null&&n.length)&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.map(e=>t.jsx("button",{type:"button",onClick:()=>_(e),className:"px-3 py-1 rounded-full bg-[#F3F4F6] hover:bg-[#E5E7EB] text-sm",children:e},e))}),r(c)&&t.jsx("div",{className:"mt-1 text-[12px]",children:h||m?t.jsx("span",{className:"text-[#6B7280]",children:"Checking availability…"}):x?t.jsx("span",{className:"text-[#EF4444]",children:"Username already exists"}):t.jsx("span",{className:"text-[#10B981]",children:"Username is available"})})]}),t.jsx("div",{children:t.jsx("input",{type:"date",max:A,value:u,onChange:e=>B(e.target.value),placeholder:"Select date of birth",className:"h-12 sm:h-[52px] w-full rounded-full bg-[#ECEFF1] focus:bg-[#FFF6D9] px-5 text-[15px] placeholder:text-[#8C9AAE] border border-transparent focus:border-[#9FC43E] outline-none"})})]}),t.jsx("div",{className:"mt-6 sm:mt-8 flex justify-center",children:t.jsx(O,{onClick:K,disabled:!D,className:`!w-fit px-10 py-4 mx-auto h-[48px] sm:h-[52px] rounded-full font-semibold text-white shadow-[0_8px_18px_rgba(159,196,62,0.35)] disabled:opacity-60 disabled:cursor-not-allowed
                        bg-[#9FC43E] hover:bg-[#8AB532]`,children:"Create Profile"})})]})})})};export{q as default};
