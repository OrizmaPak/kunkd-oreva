import{ah as V,a as z,g as B,r as m,D as u,E as F,H as M,$ as O,j as t,a0 as R,K as k,ae as Y,af as G,B as K,L as T,J as x,X as n,x as h,M as U,P as q}from"./index-7fa67d35.js";import{S as H}from"./SchoolCongratulationContent-b48ea0a7.js";const J=()=>{const{isLoading:f,mutate:p}=V(),[,g]=z(B),o=new Date,j=o.getFullYear(),r=o.getMonth()+1,i=o.getDate(),_=j+"-"+(r<10?"0"+r:r)+"-"+(i<10?"0"+i:i),[c,N]=m.useState(60);m.useEffect(()=>{const a=setInterval(()=>{N(s=>s-1)},1e3);return c===0&&clearInterval(a),()=>clearInterval(a)},[c]);const b=u.object({otp:u.string().min(4,{message:" OTP can only be at least 4 characters long"})}),{handleSubmit:v,setValue:y,watch:w,trigger:S,formState:C}=F({resolver:M(b)}),A=w("otp"),D=a=>{p({...a},{onSuccess(s){var l,d;const e=(l=s==null?void 0:s.data)==null?void 0:l.data;x.show({title:"Notification",message:s.data.message}),n.add_unique_user_id(e==null?void 0:e.user_id),n.add_first_name(e==null?void 0:e.firstname),n.add_last_name(e==null?void 0:e.lastname),n.add_email(e==null?void 0:e.email),n.add_mobile(e==null?void 0:e.phoneNumber),h("web_school_registered",{email_address:e==null?void 0:e.email,user_id:e==null?void 0:e.user_id,registration_date:_,schoolname:(d=e==null?void 0:e.school)==null?void 0:d.name,registration_method:"manual",registration_platform:"webapp"}),h("school_otp_verification_status",{school_id:e==null?void 0:e.user_id,verification_status:"true"}),g({...e}),L()},onError(s){return x.show({title:"Notification",message:U("You have entered a wrong verification code")}),s}})},E=a=>{y("otp",a),S("pin")},[I,{open:L,close:P}]=O(!1);return t.jsxs(t.Fragment,{children:[t.jsx(R,{opened:I,radius:34,centered:!0,size:"495px",onClose:P,withCloseButton:!1,closeOnClickOutside:!1,transitionProps:{duration:500,timingFunction:"ease"},children:t.jsx(H,{route:"/schooldashboard",message:" Your profile has been created"})}),t.jsx("div",{className:"flex justify-center  rounded-[50px] w-[550px]  py-[30px] bg-white",children:t.jsxs("div",{className:"inner-form-w mx-auto relative",children:[t.jsx("div",{className:"flex justify-center items-center mt-8 mb-12 ",children:t.jsx("img",{src:k,alt:"image",className:"w-[160px]"})}),t.jsxs("div",{className:"w-[100%]  my-auto mt-12 ",children:[t.jsx("h1",{className:" font-semibold header2 font-BalooSemiBold text-center",children:"Verify account"}),t.jsxs("p",{className:"text3 text-[#A7A7A7]  font-ArimoRegular text-center mb-8 mt-2",children:["A code has been sent to email, enter to verify your account"," "]}),t.jsxs("form",{onSubmit:v(D),children:[t.jsxs("div",{className:"mt-10 flex justify-center items-center gap-4 flex-col",children:[t.jsx(Y,{position:"center",children:t.jsx(G,{value:A,onChange:E,size:"5",color:"red",radius:10,placeholder:"",autoFocus:!0})}),t.jsx("br",{}),C.errors.otp&&t.jsx("p",{className:"text-red-700 text3",children:"PIN must be exactly 4 characters long"})]}),t.jsx("p",{className:"mt-4 flex justify-center items-center",children:t.jsx(K,{type:"submit",size:"sm",backgroundColor:"green",className:" rounded-full px-[80px]",children:f?t.jsx("p",{className:"flex justify-center items-center",children:t.jsx(T,{color:"white",size:"sm"})}):t.jsx("span",{className:"text2 py-3",children:"Verify"})})})]}),t.jsx("p",{className:"mt-4 text-center text3  ",children:t.jsxs("p",{className:"font-ArimoRegular",children:["Resend in"," ",t.jsxs("span",{className:"text-customGreen",children:[c,"s "]})]})})]})]})})]})},$=()=>t.jsx("div",{className:"flex",children:t.jsx(q,{children:t.jsx(J,{})})});export{$ as default};
