import{a as L,g as z,as as Q,at as M,au as X,D as y,E as K,H as U,j as e,I as q,B as I,L as D,x as T,av as R,J as f,M as _,aw as V,ax as H,ay as Y,az as J,r as B,aA as $,aB as O,$ as G,a0 as k,aC as W,aD as Z,T as ee,aE as se}from"./index-7fa67d35.js";import{C as ie}from"./ChangeProfileStatus-b93d7f47.js";import{S as te,E as ae}from"./connectionEmpty-35d9a48c.js";import{S as ne}from"./SearchFilter-0cb8ea8a.js";import"./index.esm-9f214563.js";const le=({newClassClose:l,openSchNotifications:N})=>{var j,p,s;const[n]=L(z),d=Q(),{data:c}=M(),x=c==null?void 0:c.data.data.records,{mutate:r,isLoading:C}=X(),b=y.object({name:y.string().min(2,{message:"Class name must be at least 2 characters long"}).max(40,{message:"Class name must not exceed 20 characters"}),teacher_id:y.string().optional()}),{register:u,handleSubmit:w,formState:{errors:a}}=K({resolver:U(b)}),v=async i=>{r({name:i.name,teacher_id:Number(i.teacher_id)},{onSuccess(o){T("add_class",{class_name:i.name,school_id:n==null?void 0:n.user_id,date_created:R}),l(),d.invalidateQueries(["GetClassList"]),d.invalidateQueries(["GetLicense"]),f.show({title:"Notification",message:o.data.message})},onError(o){l(),N(),f.show({title:"Notification",message:_(o)})}})};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-center bg-customGreen py-[12px] px-[20px]",children:e.jsx("p",{className:"font-Arimo text-white text-[22px] text-center",children:"Add new class"})}),e.jsx("div",{className:"px-[24px] py-[32px]",children:e.jsxs("form",{onSubmit:w(v),children:[e.jsx("p",{className:"",children:e.jsx(q,{reg:u("name"),errorMsg:(j=a==null?void 0:a.name)==null?void 0:j.message,type:"text",placeholder:"Enter class name"})}),e.jsxs("div",{className:"mt-5",children:[e.jsx("p",{className:`p-3  px-8 rounded-full flex items-center gap-2 h-[44px] ${a!=null&&a.ageGroup?"border-red-700 border-[1px]":" bg-[#F1F1F1]"}`,children:e.jsxs("select",{...u("ageGroup"),name:"age-group",id:"age-group",className:"w-full  h-full focus-within:outline-none bg-inherit",children:[e.jsx("option",{className:" bg:in ",value:"",children:"Select Age Group"}),e.jsx("option",{value:"2-4",children:"2-4"}),e.jsx("option",{value:"5-7",children:"5-7"}),e.jsx("option",{value:"8-10",children:"8-10"})]})}),e.jsx("span",{className:"text-red-600 mb-10 ",children:(p=a==null?void 0:a.ageGroup)==null?void 0:p.message})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("p",{className:`p-3 mb-8 px-8 rounded-full flex items-center gap-2 h-[44px] ${a!=null&&a.teacher_id?"border-red-700 border-[1px]":" bg-[#F1F1F1]"}`,children:e.jsxs("select",{...u("teacher_id"),name:"teacher_id",id:"classid",className:"w-full  h-full flex-1  focus:outline-none bg-inherit",children:[e.jsx("option",{value:"",children:"Select Teacher"}),x==null?void 0:x.filter(i=>{var o;return((o=i==null?void 0:i.user)==null?void 0:o.class_name)===""}).map(i=>{var o,A;return e.jsxs("option",{value:(o=i==null?void 0:i.user)==null?void 0:o.id,children:[i==null?void 0:i.user.firstname," ",(A=i==null?void 0:i.user)==null?void 0:A.lastname]})})]})}),e.jsx("span",{className:"text-red-600 mb-10",children:(s=a.teacher_id)==null?void 0:s.message})]}),e.jsxs("p",{className:"mt-6 flex gap-5 justify-center",children:[e.jsx(I,{onClick:l,className:"text-black bg-[#F5F7F8] px-[35px] rounded-full",size:"sm",children:"Cancel"}),e.jsxs(I,{type:"submit",size:"sm",backgroundColor:"green",className:"px-[35px] rounded-full",children:[" ",C?e.jsx("p",{className:"flex justify-center items-center ",children:e.jsx(D,{color:"white",size:"sm"})}):e.jsx("span",{children:"Create Class"})]})]})]})})]})},ce=({editClose:l,currentClicked:N,currentClassData:n,currentTeacherData:d})=>{var o,A,m,E;const c=Q(),[x]=L(z),{mutate:r,isLoading:C}=V(),{data:b}=M(),u=b==null?void 0:b.data.data.records,{mutate:w,isLoading:a}=H(),v=y.object({name:y.string().min(1,{message:"Class Name is invalid"}),ageGroup:y.string().min(1,{message:"Age Range is invalid"}),teacher_id:y.string().optional()}),{register:j,handleSubmit:p,formState:{errors:s}}=K({resolver:U(v)}),i=async t=>{r({name:t==null?void 0:t.name,class_id:N},{onSuccess(h){c.invalidateQueries({queryKey:["GetClassList"]}),T("edit_class",{school_id:x==null?void 0:x.user_id,class_name:t==null?void 0:t.name,date_updated:R}),l(),f.show({title:"Notification",message:h.data.message})},onError(h){f.show({title:"Notification",message:_(h)})}}),w({user_id:Number(t==null?void 0:t.teacher_id),class_id:N},{onSuccess(h){c.invalidateQueries({queryKey:["GetClassList"]}),c.invalidateQueries({queryKey:["GetTeacherList"]}),l(),f.show({title:"Notification",message:h.data.message})},onError(h){f.show({title:"Notification",message:_(h)})}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center bg-customGreen py-[12px] px-[20px]",children:[e.jsx("p",{className:" font-Arimo text-white text-[22px] text-center  ",children:"Edit Class"}),e.jsx(Y,{onClick:l,color:"white",size:35})]}),e.jsx("div",{className:"px-8 mt-7",children:e.jsxs("form",{onSubmit:p(i),children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"className",className:"text-[#AEB7BF] text-[12px] font-InterReg",children:[" ","Class Name"]}),e.jsx(q,{reg:j("name"),errorMsg:(o=s==null?void 0:s.name)==null?void 0:o.message,type:"text",value:n==null?void 0:n.name,placeholder:"Enter class name"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"age",className:"text-[#AEB7BF] text-[12px] font-InterReg",children:"Age Group"}),e.jsx("p",{className:`p-3 mb-2 px-8 rounded-full flex items-center gap-2 h-[44px] ${s!=null&&s.ageGroup?"border-red-700 border-[1px]":" bg-[#F1F1F1]"}`,children:e.jsxs("select",{...j("ageGroup"),name:"ageGroup",id:"ageGroup",className:"w-full  h-full focus-within:outline-none bg-inherit",children:[e.jsx("option",{className:" bg:in ",value:"age-group",children:"Select Age Group"}),e.jsx("option",{value:"2-4",children:"2-4"}),e.jsx("option",{value:"5-7",children:"5-7"}),e.jsx("option",{value:"8-10",children:"8-10"})]})}),e.jsx("span",{className:"text-red-600 mb-10 ",children:(A=s==null?void 0:s.ageGroup)==null?void 0:A.message})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{htmlFor:"className ",className:"text-[#AEB7BF] text-[12px] font-InterReg",children:[" ","Teacher"]}),e.jsx("p",{className:`p-3 mb-2 px-8 rounded-full flex items-center gap-2 h-[44px] ${s!=null&&s.teacher_id?"border-red-700 border-[1px]":" bg-[#F1F1F1]"}`,children:e.jsxs("select",{...j("teacher_id"),name:"teacher_id",id:"teacher_id",value:(m=d==null?void 0:d.user)==null?void 0:m.id,className:"w-full  h-full flex-1  focus:outline-none bg-inherit",children:[e.jsx("option",{children:"Select Teacher"}),u==null?void 0:u.map(t=>{var h,F;return e.jsxs("option",{value:(h=t==null?void 0:t.user)==null?void 0:h.id,children:[t==null?void 0:t.user.firstname," ",(F=t==null?void 0:t.user)==null?void 0:F.lastname]})})]})}),e.jsx("span",{className:"text-red-600 mb-10",children:(E=s.teacher_id)==null?void 0:E.message})]}),e.jsx("p",{className:"my-5 flex  justify-end",children:e.jsx(I,{type:"submit",size:"sm",backgroundColor:"green",className:"rounded-full",children:C||a?e.jsx("p",{className:"flex justify-center items-center",children:e.jsx(D,{color:"white",size:"sm"})}):e.jsxs("span",{className:"flex gap-3 items-center",children:[e.jsx(J,{color:"white",size:20})," Edit Class"]})})})]})})]})},P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADtSURBVHgB7ZU9bsJAEIXfrL0jEMLZIKWhCUKpXPkoHCFHyE04QnIEbrJ0SClAFNQ2WDQ2Xhhb0CAK1rT+mv0pPs1r3hAEa1cT0voXRIk8Dbw5L5jUTxxPt9TImK1SyozMEEGgvFRV5bDPjyiLU8aKkpBYz7UOzdfnGMwh2vAxivC/3pmiqv5kHJq9DQetZTXMGu+STlxJk8835iMaB8G8brqjE3bCTvisMKsr6FVuDoUzLdN9jqI8oS1FWeIgnSgsyK42E3LOsnRiFA0QKM+CdQ5pmtdnxv1+QvXnVTqX6wz+ZLI6ltzrfcfT8fYC6QhLLIQQbBoAAAAASUVORK5CYII=",re=({data:l,onClick:N,status:n})=>{const[d,c]=B.useState(0),x=Q(),[r]=L(z),{mutate:C,isLoading:b}=$(),{mutate:u,isLoading:w}=O(),a=async()=>{n==="active"?C({class_id:d},{onSuccess(s){T("disable_class",{school_id:r==null?void 0:r.user_id,disable_date:R}),x.invalidateQueries({queryKey:["GetClassList"]}),f.show({title:"Notification",message:s.data.message}),p()},onError(s){f.show({title:"Notification",message:_(s)})}}):u({class_id:d},{onSuccess(s){x.invalidateQueries({queryKey:["GetClassList"]}),f.show({title:"Notification",message:s.data.message}),p()},onError(s){f.show({title:"Notification",message:_(s)})}})},[v,{open:j,close:p}]=G(!1);return e.jsxs(e.Fragment,{children:[e.jsx(k,{radius:10,padding:0,size:"md",opened:v,onClose:p,withCloseButton:!1,centered:!0,children:e.jsx(ie,{onContinue:a,activeIsLoading:w,isLoading:b,onCancel:p,label:"Class",status:n})}),e.jsx("div",{className:"   my-auto border-b-[2px] border-[#E5E7EB] text-[#101928]  py-6 font-medium ",children:e.jsx("div",{children:e.jsxs("div",{className:"grid  grid-cols-[300px_1fr_1fr_250px]  text-[#101928] font-Arimo  px-8",children:[e.jsxs("div",{onClick:N,className:"flex hover:cursor-pointer items-center  text-[#101928] justify-start gap-[20px] ",children:[e.jsx("img",{src:P,alt:"image",className:"w-[20px] h-[20px]"}),e.jsx("span",{className:"text-[#101928] font-Arimo",children:l.name})]}),e.jsx("div",{className:"flex justify-start items-center   ",children:l.student_count}),e.jsx("div",{className:"",children:"Mike Smith"}),e.jsxs("div",{className:"flex justify-between  gap-4  items-center pr-4 ",children:[e.jsx("span",{}),e.jsx("button",{onClick:()=>{c(l.id),j()},className:" text-[#7E7E89] font-semibold font-Hanken ",children:e.jsx("span",{className:"",children:n==="active"?"Disable":"Enable"})}),e.jsx("button",{onClick:N,className:" text-customGreen font-Inter",children:"Edit"})]})]})})})]})},he=()=>{const[l,N]=B.useState(1),{data:n}=M(),d=n==null?void 0:n.data.data.records,[c,x]=B.useState("active");console.log("status",c);const{data:r,isLoading:C,refetch:b}=W(c,l.toString()),u=Math.ceil((r==null?void 0:r.data.data.totalRecord)/10),[w,{open:a,close:v}]=G(!1),[j,{open:p,close:s}]=G(!1),[i,{open:o,close:A}]=G(!1),m=r==null?void 0:r.data.data.records,[E,t]=B.useState(0),h=m==null?void 0:m.find(g=>(g==null?void 0:g.id)==E),F=d==null?void 0:d.find(g=>{var S;return((S=g==null?void 0:g.user)==null?void 0:S.class_id)==E});return e.jsxs("div",{className:"h-full flex flex-col overflow-y-scroll",children:[e.jsx(k,{radius:16,padding:0,xOffset:500,size:"md",opened:j,onClose:s,centered:!0,withCloseButton:!1,children:e.jsx(ce,{currentClassData:h,currentTeacherData:F,currentClicked:E,editClose:s})}),e.jsx(k,{radius:16,padding:0,size:450,opened:w,onClose:v,centered:!0,withCloseButton:!1,children:e.jsx(le,{newClassClose:v,openSchNotifications:o})}),e.jsx(k,{radius:10,size:"md",opened:i,onClose:A,closeButtonProps:{size:"lg"},centered:!0,children:e.jsx(te,{onCancel:A,label:"Classes"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h1",{className:"text-[25px]  font-Inter ",children:["Classes",e.jsx("span",{className:"text-[#667185] bg-[#C2DBB0] rounded-2xl p-2 ml-3",children:(m==null?void 0:m.length)||0})," "]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{onClick:()=>a(),size:"sm",backgroundColor:"green",children:e.jsxs("span",{className:"flex  h-[25px] w-[] justify-center items-center gap-2",children:[e.jsx(Z,{color:"white",size:25}),e.jsx("span",{className:"text-white",children:"Add new class"})]})})})]}),e.jsxs("div",{className:" flex-grow flex flex-col rounded-3xl py-4 bg-white border-[2px] border-[#E4E7EC] ",children:[e.jsx("div",{className:"px-8 flex gap-5 justify-end",children:e.jsx(ne,{setFilterValue:x,filterValue:c})}),e.jsx("div",{className:"   ",children:e.jsxs("div",{className:"grid  grid-cols-[300px_1fr_1fr_250px] mt-5    text-[#344054] font-semibold  py-4 border-b-[2px] bg-[#F9FAFB] border-[#E4E7EC] px-8",children:[e.jsxs("div",{className:"flex gap-[20px] items-center  ",children:[e.jsx("img",{src:P,alt:"image",className:"w-[20px] h-[20px]"}),"Name"]}),e.jsx("div",{className:"",children:"No of Students"}),e.jsx("div",{className:"",children:"Name of Teachers"}),e.jsx("div",{className:"flex justify-end   items-center  ",children:e.jsx("span",{})})]})}),e.jsx("div",{className:"flex flex-col  flex-grow",children:e.jsx("div",{children:C?new Array(8).fill(1).map((g,S)=>e.jsx(ee,{height:60,my:10,visible:!0,children:e.jsx("h1",{className:"w-full"})},S)):(m==null?void 0:m.length)>0?m.map((g,S)=>e.jsx(re,{data:g,onClick:()=>(t(g.id),p()),status:c},S)):e.jsxs("div",{className:"flex justify-center items-center h-full mt-24 flex-col",children:[e.jsx("img",{src:ae,alt:"No classes",className:"w-[150px] h-[150px] object-contain"}),e.jsx("p",{className:"font-Inter text-[18px]",children:"No classes available"}),e.jsx("p",{className:"font-Baloo text-[14px]",children:"Classes will appear here once added."})]})})}),e.jsx("div",{className:"flex  justify-end mt-2 px-4",children:u>1&&e.jsx("div",{className:"  mr-2 flex justify-end mt-2  pb-4",children:e.jsx(se,{total:u,value:l,defaultChecked:!0,onChange:N,onClick:()=>{b()},styles:()=>({control:{"&[data-active]":{backgroundColor:"#C2DBB0 !important"}}})})})})]}),e.jsx("style",{children:`
       ::-webkit-scrollbar {
  width: 0;
  background: transparent;
}
        `})]})};export{he as default};
