import{f as h,aK as b,$ as N,aL as v,j as e,a0 as y,J as o,M as w,aM as _,aN as u,aO as C,aP as k,aQ as T,aR as H,aS as D,T as d,aT as M,aU as P,r as f,a as I,g as B,aV as F,x as E,av as z,N as R,aq as O}from"./index-7fa67d35.js";import{M as $,P as A}from"./ProgressLog-7b82512d.js";import{C as L}from"./ChangeProfileStatus-b93d7f47.js";import{D as U}from"./profileavatar24-f9c78eb6.js";import"./index-c42afae0.js";const W="/assets/lessthanIcon-67bf89a7.svg",q="/assets/studentIcon-e94d757a.svg",G=({setStartDate:s,setEndDate:r})=>{const n=h(),a=b().studentId,[x,{open:c,close:p}]=N(!1),{mutate:m,isLoading:i}=v(),g=async()=>{m({student_id:Number(a)},{onSuccess(j){n(-1),o.show({title:"Notification",message:j.data.message}),p()},onError(j){o.show({title:"Notification",message:w(j)})}})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{radius:10,padding:30,size:"md",opened:x,onClose:p,withCloseButton:!1,centered:!0,children:e.jsx(L,{onContinue:g,isLoading:i,onCancel:p,label:"Student"})}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between items-center w-full  ",children:[e.jsxs("div",{className:"flex justify-items-center items-center gap-4",children:[e.jsx("span",{onClick:()=>n(-1),className:" hover:cursor-pointer",children:e.jsx("img",{loading:"lazy",src:W,alt:"",className:""})}),e.jsx("h1",{className:"text-[25px] font-bold",children:" Students profile"})]}),e.jsxs("div",{className:"flex justify-end  gap-2 items-center",children:[e.jsx("span",{className:"text-[#8530C1]",children:"Sort by date:"}),e.jsx($,{setStartDate:s,setEndDate:r})]}),e.jsx("div",{children:e.jsxs("button",{onClick:c,className:"text-white bg-[#ED1C24] p-3 flex gap-2  rounded-3xl",children:[e.jsx("img",{loading:"lazy",src:q,alt:""}),e.jsx("span",{children:"Remove student"})]})})]})})]})};_.register(u,C,k,T,H,D);const J={scales:{y:{display:!1},x:{grid:{display:!1}}},responsive:!0,plugins:{legend:{position:"top"},title:{display:!0}},barThickness:10},K=["M","T","W","T","F","S","S"],t={labels:K,datasets:[{label:"Hours",data:[6,6,3,6,4,7,9],backgroundColor:"#e0b3ef",borderWidth:0,barPercentage:.2,borderRadius:4}]};function Q({meta:s}){return t.datasets[0].data=s,s.length<1?"loading ...":e.jsx(M,{options:J,data:t})}const V=({schoolStudentStat:s,isLoading:r})=>{const n=Object.values((s==null?void 0:s.learning_hours)??{}).map(l=>l/3600);return e.jsx(e.Fragment,{children:r?e.jsx(d,{height:300,width:350,radius:20,mb:"xl",visible:r}):e.jsxs("div",{className:"bg-white rounded-3xl flex-grow py-2 px-4 mt-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h1",{className:"text-[16px] font-Hanken font-semibold ",children:"Learning Hours"})}),e.jsx(Q,{meta:n})]})})},X=({schoolStudentStat:s,isLoading:r})=>e.jsx(e.Fragment,{children:r?e.jsx(d,{height:150,width:280,radius:20,mb:"xl",visible:r}):e.jsxs("div",{className:"p-5 bg-white rounded-3xl flex-grow pb-4",children:[e.jsx("h1",{className:" text-[16px] leading-[30px] font-Hanken font-semibold ",children:"My Teacher"}),e.jsxs("div",{className:"flex gap-4 items-center mt-8 ",children:[e.jsx("img",{loading:"lazy",src:(s==null?void 0:s.teacher_picture)||U,alt:"fgrase",className:"w-[50px]  rounded-full"}),e.jsxs("p",{className:"",children:[e.jsx("p",{className:"font-semibold leading-[30px] font-Hanken text-[14px]  ",children:s==null?void 0:s.teacher_name}),e.jsx("p",{className:"mt-0 text-[12px] text-[#B5B5C3]",children:s==null?void 0:s.teacher_email})]})]})]})}),Y=({isLoading:s,schoolStudentStat:r})=>e.jsx(e.Fragment,{children:s?e.jsx(d,{height:150,width:600,radius:20,mb:"xl",visible:s}):e.jsxs("div",{className:"flex justify-between bg-[#003914] text-white px-6 py-4 rounded-xl  mx-[auto] ",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("img",{loading:"lazy",src:r==null?void 0:r.avatar,alt:"image",className:"w-[100px] rounded-full  border"}),e.jsxs("div",{className:" ",children:[e.jsx("h1",{className:"text-[24px] leading-8",children:r==null?void 0:r.name}),e.jsx("p",{children:r==null?void 0:r.parent_email})]})]}),e.jsx("p",{className:"border-[1px] border-white h-[100px] py-4 "}),e.jsx("div",{className:"flex justify-start  ",children:e.jsx("div",{className:"  flex-col gap-4 ml-4 flex item-center justify-center",children:e.jsxs("span",{className:" border-dotted border-2 px-3 py-2  rounded-full inline-block ",children:["Class: ",r==null?void 0:r.class]})})})]})}),Z=({schoolStudentStat:s,isLoading:r})=>{var n,l;return e.jsx(e.Fragment,{children:r?e.jsx(d,{height:150,width:280,radius:20,mb:"xl",visible:r}):e.jsxs("div",{className:" p-5 bg-white rounded-3xl flex-grow",children:[e.jsx("h1",{className:" text-[16px] mb-2 leading-[30px] font-Hanken font-semibold ",children:"Top Interest,"}),e.jsxs("div",{className:"flex  flex-col",children:[((n=s==null?void 0:s.top_interest_contents)==null?void 0:n.length)===0||(s==null?void 0:s.top_interest_contents)===null&&e.jsx("p",{className:"mt-4 font-Inter ",children:" Oops!!! No dataðŸ˜¤ "}),(l=s==null?void 0:s.top_interest_contents)==null?void 0:l.slice(0,4).map((a,x)=>e.jsx("p",{className:"text-[12px]",children:a==null?void 0:a.name},x))]})]})})},S=({schoolStudentStat:s,isLoading:r})=>{const n=(s==null?void 0:s.total_time_spent)??0,l=Math.floor(n/60),a=n%60,x=`${l}:${a}`;return e.jsx(e.Fragment,{children:r?e.jsx(d,{height:150,width:205,radius:20,mb:"xl",visible:r}):e.jsxs("div",{className:"p-5 bg-white rounded-3xl",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h1",{className:"text-[16px] font-semibold leading-[30px] mb-4 font-Hanken  ",children:"Total Time Spent"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-[36px] font-bold text-[#8530C1] leading-[40px] ",children:x}),e.jsx("p",{className:"flex justify-between ",children:e.jsx("span",{children:"Minutes"})})]})]})})},ee=({schoolStudentStat:s,isLoading:r})=>{var n,l;return e.jsx("div",{className:"h-full ",children:r?e.jsx(d,{height:150,width:350,radius:20,mb:"xl",visible:r}):e.jsxs("div",{className:"bg-white p-4 rounded-3xl  h-full",children:[e.jsx("h1",{className:"font-semibold text-[16px] leading-[30px]  mb-2 font-Hanken ",children:"Recently Completed"}),e.jsxs("div",{className:"flex gap-5",children:[((n=s==null?void 0:s.recently_completed_content)==null?void 0:n.length)===0&&e.jsx("p",{className:" font-semibold ",children:"Oops!!! No dataðŸ˜¤ "}),(l=s==null?void 0:s.recently_completed_content)==null?void 0:l.slice(0,2).map((a,x)=>e.jsx(se,{data:a},x))]})]})})},se=({data:s})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-3 ",children:[e.jsx("p",{children:e.jsx("img",{loading:"lazy",src:s==null?void 0:s.thumbnail,alt:"image",className:"w-[65px] h-[65px] rounded"})}),e.jsxs("p",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-[20px] font-bold font-Hanken text-[#2BB457]",children:[" ","8.0"]}),e.jsx("span",{className:"text-[15px] font-bold  text-gray-300",children:"10hrs ago"})]})]})}),re=()=>e.jsx("div",{className:"flex justify-between  py-6",children:e.jsx("p",{className:" font-Hanken font-semibold ",children:"Content in progress"})}),ie=({data:s})=>{var l;const r=Number((l=s==null?void 0:s.pages)==null?void 0:l.length)||50,n=Math.floor(Number(s==null?void 0:s.pages_read)/r*100)||0;return e.jsxs("div",{className:"grid grid-cols-[65px_1fr_200px] text-[10px] text-[#B5B5C3] flex-grow  mb-[30px]  ",children:[e.jsx("p",{className:"flex justify-start items-center",children:e.jsx("img",{loading:"lazy",src:s==null?void 0:s.thumbnail,alt:"image",className:"w-[55px] h-[55px]  rounded-[12px]"})}),e.jsx("p",{className:"flex flex-col justify-center ",children:e.jsx("span",{className:" font-Hanken font-semibold text-[12px] text-black",children:s==null?void 0:s.name})}),e.jsxs("p",{className:"flex items-center justify-center gap-2  text-[12px] ",children:[s.category==="Languages"||s.category==="Audiobooks"?64:n,"%",e.jsx("p",{className:"flex-grow",children:e.jsx(P,{value:s.category==="Languages"||s.category==="Audiobooks"?64:n})})]})]})},ne=({schoolStudentStat:s,isLoading:r})=>{var n,l;return e.jsx(e.Fragment,{children:r?e.jsx(d,{height:350,width:600,radius:20,mb:"xl",visible:r}):e.jsxs("div",{className:" bg-white rounded-3xl  flex-col px-6  w-full overflow-y-scroll overflow-hidden  h-[300px]",children:[e.jsx(re,{}),((n=s==null?void 0:s.ongoing_contents)==null?void 0:n.length)===0?e.jsxs("p",{className:"mt-4 font-Inter",children:["Oops!!! No data available for content in progressðŸ˜¤"," "]}):(l=s==null?void 0:s.ongoing_contents)==null?void 0:l.map((a,x)=>e.jsx(ie,{data:a},x))]})})},pe=()=>{var g;const r=b().studentId,[n,l]=f.useState(""),[a,x]=f.useState(""),[c]=I(B),{data:p,isLoading:m}=F(r,n,a),i=(g=p==null?void 0:p.data)==null?void 0:g.data;return f.useEffect(()=>{E(`${(c==null?void 0:c.role)=="teacher"?"teacher":(c==null?void 0:c.role)=="user"?"parent":"school"}`,{user_id:c==null?void 0:c.user_id,student_name:i==null?void 0:i.name,date_viewed:z,total_time_spent:i==null?void 0:i.total_time_spent,teacher_name:i==null?void 0:i.teacher_name,top_interest:i==null?void 0:i.top_interest_contents,recently_completed:i==null?void 0:i.parent_email,learning_hours:i==null?void 0:i.learning_hours})},[]),r?e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},className:" h-[100%] flex flex-col  overflow-y-scroll ",children:[e.jsx("div",{className:"mb-2 ",children:e.jsx(G,{setStartDate:l,setEndDate:x})}),e.jsxs("div",{className:" flex-grow gap-6 flex w-full ",children:[e.jsxs("div",{className:" flex w-full flex-col  fl gap-y-5  ",children:[e.jsx("div",{children:e.jsx(Y,{schoolStudentStat:i,isLoading:m})}),e.jsxs("div",{className:"flex justify-center gap-5 flex-basis-[1/2]  ",children:[e.jsx("div",{className:"w-[205px] ",children:e.jsx(S,{schoolStudentStat:i,isLoading:m})}),e.jsx("div",{className:" flex-grow h-full ",children:e.jsx(ee,{isLoading:m,schoolStudentStat:i})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 ",children:[e.jsx(X,{schoolStudentStat:i,isLoading:m}),e.jsx(Z,{schoolStudentStat:i,isLoading:m})]}),e.jsx("div",{className:"flex-grow flex ",children:e.jsx(ne,{schoolStudentStat:i,isLoading:m})})]}),e.jsxs("div",{className:"  flex basis-3/5   flex-col gap-3",children:[e.jsx(A,{logData:i==null?void 0:i.content_progress_log,isLoading:m}),e.jsx(V,{schoolStudentStat:i,isLoading:m})]})]}),e.jsx("style",{children:`
       ::-webkit-scrollbar {
  width: 0;
  background: transparent;
}
        `})]}):e.jsx(R,{to:"../",replace:!0})};export{pe as default};
